<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/js/w2ui-1.5.rc1.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="/js/w2ui-1.5.rc1.js"></script>
    <script src="https://use.fontawesome.com/6e18d0f7c3.js"></script>
</head>
<body>

<!--  color Icon images:  icon-page, w2ui-icon-check, ... see below in toptoolbar -->

<script>
var pstyle = 'border: 1px solid #dfdfdf; padding: 0px;';
var pstyle2 = 'border: 1px solid #cfcfcf; padding: 0px;';
var prefmt = 'font-family: "Monaco", "Menlo", "Source Code Pro", monospace; white-space: pre; font-size: 8pt; background-color: white;';
var stdfmt = 'font-family: "Open Sans","Roboto",sans-serif; font-size: 9pt; border-spacing:5px; padding: 5px; color: #777777'
var config = {
    mainlayout: {
        name: 'mainlayout',
        padding: 0,
        panels: [
            { type: 'top', size: 55, style: pstyle, content: 'top' },
            { type: 'left', size: 200, hidden: true, style: pstyle, content: 'left' },
            { type: 'main', style: pstyle, content: 'main' },
			{ type: 'preview', size: '50%', resizable: true, hidden: true, style: pstyle, content: 'preview' },
			{ type: 'right', size: 200, resizable: true, style: pstyle, hidden: true, content: 'Details' },
            { type: 'bottom', size: 23, resizable: true, style: stdfmt, content: '&copy; 2015-2016 Accord Interests' }
        ]
    },
    toplayout: {
        name: 'toplayout',
        padding: 1,
        panels: [
            { type: 'top', hidden: true, size: 60, resizable: true, style: pstyle2, content: '<p align="center">**** Accord NEWS FLASH ****</p>'},
            { type: 'left', size: 200, style: pstyle2, resizable: true, content: 'sidebar' },
            { type: 'main',  size: 100, style: pstyle2, content: 'toplayout - main' },
            { type: 'preview', size: '50%', resizable: true, hidden: true, style: pstyle2, content: 'preview' },
            { type: 'right', size: 200, resizable: true, style: pstyle2, content: 'detail' },
            { type: 'bottom', size: 20, resizable: true, style: pstyle2, hidden: true, content: 'toplayout - bottom' }
        ]
    },
    reportslayout: {
        name: 'reportslayout',
        padding: 1,
        panels: [
            { type: 'top',size: 40, style: pstyle2, content: 'reports toolbar'},
            { type: 'left', size: 200, hidden: true, content: 'sidebar' },
            { type: 'main',  size: 100, style: prefmt, content: 'reports main window' },
            { type: 'preview', size: '50%', resizable: true, hidden: true, content: 'reports preview' },
            { type: 'right', size: 200, resizable: true, hidden: true, content: 'reports - detail' },
            { type: 'bottom', size: 20, resizable: true, hidden: true, content: 'reports - bottom' }
        ]
    },
    toptoolbar: {
        name: 'toptoolbar',
        items: [
             { type: 'html',  id: 'logo',
                html: '<div style="padding: 4px 0px;">'+
                      '<img src="/html/images/logo.png">'+
                      '</div>' 
            },
            { type: 'break', id: 'break1' },
            { type: 'menu',    id: 'moduleMenu', caption: 'Select Module',    icon: 'fa fa-sitemap', items: [
                { text: 'Directory',          icon: 'fa fa-user' }, 
                { text: 'RentRoll',           icon: 'fa fa-building-o' }, 
                { text: 'Forms & Procedures', icon: 'fa fa-book' }, 
            ]},
            // { type: 'html', id: 'BUD',
            //     html: '<select class="HR" name="CoCode">'+
            //         '<option value="1" >REX</option>'+
            //         '<option value="2" >401</option>'+
            //         '<option value="3" >CCC</option></select>'
            // },
            { type: 'menu',    id: 'budMenu', caption: 'Select Business Unit',    icon: 'fa fa-building', items: [
                { text: 'REX', icon: 'fa fa-building-o' }, 
                { text: 'CCC', icon: 'fa fa-building-o' }, 
                { text: '401', icon: 'fa fa-building-o' }, 
            ]},
            { type: 'break', id: 'break2' },
            { type: 'button',  id: 'goRentables',  caption: 'Rentables',  icon: 'fa fa-cube', hint: 'Rentables' },
            { type: 'button',  id: 'goTransactants',  caption: 'Transactants',  icon: 'fa fa-users', hint: 'Transactants' },
            { type: 'button',  id: 'goRentalAgreements',  caption: 'Rental<br>Agreements',  icon: 'fa fa-certificate', hint: 'Rental Agreements' },
            { type: 'button',  id: 'goAssessments',  caption: 'Assessments',  icon: 'fa fa-star-o', hint: 'Assessments' },
            { type: 'button',  id: 'goReceipts',  caption: 'Receipts',  icon: 'fa fa-star', hint: 'Receipts' },
            { type: 'button',  id: 'goRatePlan',  caption: 'Rate Plan',  icon: 'fa fa-money', hint: 'RatePlan' },
            { type: 'button',  id: 'goServiceMenu',  caption: 'Service',  icon: 'fa fa-user', hint: 'Service' },
            { type: 'menu',  id: 'goReports',  caption: 'Reports',  icon: 'fa fa-file-text-o', hint: 'Reports', items: [
                { text: 'Assessments', icon: 'fa fa-file-text-o' },
                { text: 'Business Units', icon: 'fa fa-file-text-o' },
                { text: 'Chart Of Accounts', icon: 'fa fa-file-text-o' },
                { text: 'Deposit Methods', icon: 'fa fa-file-text-o' },
                { text: 'Depositories', icon: 'fa fa-file-text-o' },
                { text: 'Delinquency', icon: 'fa fa-file-text-o' },
                { text: 'GSR', icon: 'fa fa-file-text-o' },
                { text: 'Journal', icon: 'fa fa-file-text-o' },
                { text: 'Ledger', icon: 'fa fa-file-text-o' },
                { text: 'Ledger Activity', icon: 'fa fa-file-text-o' },
                { text: 'People', icon: 'fa fa-file-text-o' },
                { text: 'Payment Types', icon: 'fa fa-file-text-o' },
                { text: 'Receipts', icon: 'fa fa-file-text-o' },
                { text: 'Count By Rentable Type', icon: 'fa fa-file-text-o' },
                { text: 'Rentables', icon: 'fa fa-file-text-o' },
                { text: 'Rental Agreements', icon: 'fa fa-file-text-o' },
                { text: 'Rental Agreement Templates', icon: 'fa fa-file-text-o' },
                { text: 'Rentable Types', icon: 'fa fa-file-text-o' },
                { text: 'RentRolls', icon: 'fa fa-file-text-o' },
                { text: 'Statements', icon: 'fa fa-file-text-o' },
                { text: 'String Lists', icon: 'fa fa-file-text-o' },
                { text: 'Trial Balance', icon: 'fa fa-file-text-o' },
            ]},
            { type: 'menu',    id: 'goAdmin',  caption: 'Admin',  icon: 'fa fa-wrench', hint: 'GLAccounts, Transactants', items: [
                { text: 'GLAccounts', icon: 'fa fa-folder-o' }, 
                { text: 'Transactants', icon: 'fa fa-folder-o' }, 
            ]},
            { type: 'menu',    id: 'menuButton', caption: 'Panels',    icon: 'fa fa-table', items: [
                { text: 'Messages', icon: 'fa fa-folder-o' }, 
                { text: 'Sidebar', icon: 'fa fa-folder-o' }, 
                { text: 'mainLayoutMain', icon: 'fa fa-folder-open-o' }, 
                { text: 'topLayoutmain',  icon: 'fa fa-folder-open' },
                { text: 'Preview', icon: 'fa fa-folder-open' },
                { text: 'Details', icon: 'fa fa-folder-open' },
                { text: 'Footer', icon: 'fa fa-folder-open' },
            ]},
        ],
        onClick: function (event) {
            var s;
            var found = false;
            var x;
            console.log('target = ' + event.target)
            switch(event.target) {
                case "goRentables":
                console.log('process: goRentables')
                    w2ui['toplayout'].content('main', w2ui['rentablesGrid']); 
                    break;
                case "moduleMenu:Directory":      window.location.href = 'https://directory.airoller.com/'; break;
                case "moduleMenu:RentRoll":       window.location.href = 'https://rentroll.airoller.com/';  break;
                case "menuButton:Messages":       w2ui['toplayout'].toggle('top',true);                     break;
                case "menuButton:Sidebar":        w2ui['toplayout'].toggle('left',true);                    break;
                case "menuButton:mainLayoutMain": w2ui['mainlayout'].toggle('main',true);                   break;
                case "menuButton:Preview":        w2ui['toplayout'].toggle('preview',true);                 break;
                case "menuButton:Details":        w2ui['toplayout'].toggle('right',true);                   break;
                case "menuButton:Footer":         w2ui['mainlayout'].toggle('bottom',true);                 break;
                case "menuButton:topLayoutMain":  w2ui['toplayout'].toggle('main',true);                    break;
                case "goAdmin:GLAccounts":
                    w2ui['toplayout'].content('main', w2ui['accountsGrid']);
                    w2ui['toplayout'].hide('right',true);
                    break;
                case "goAdmin:Transactants":
                    w2ui['toplayout'].content('main', w2ui['transactantGrid']);
                    w2ui['toplayout'].hide('right',true);
                    break;
                case "goReports:Assessments":                showReport("Assessments"); break;
                case "goReports:Business Units":             showReport("Business"); break;
                case "goReports:Assessments":                showReport("Assessments"); break;
                case "goReports:Chart Of Accounts":          showReport("Chart Of Accounts"); break;
                case "goReports:Custom Attributes":          showReport("Custom Attributes"); break;
                case "goReports:Custom Attribute Refs":      showReport("Custom Attribute Refs"); break;
                case "goReports:Deposit Methods":            showReport("Deposit Methods"); break;
                case "goReports:Depositories":               showReport("Depositories"); break;
                // case "goReports:Delinquency":                showReport("Delinquency"); break;
                // case "goReports:GSR":                        showReport("GSR"); break;
                // case "goReports:Journal":                    showReport("Journal"); break;
                // case "goReports:Ledger":                     showReport("Ledger"); break;
                // case "goReports:Ledger Activity":            showReport("Ledger Activity"); break;
                case "goReports:People":                     showReport("People"); break;
                case "goReports:Payment Types":              showReport("Payment Types"); break;
                case "goReports:Receipts":                   showReport("Receipts"); break;
                case "goReports:Rentable Count By Type":     showReport("Rentable Count By Type"); break;
                case "goReports:Rentables":                  showReport("Rentables"); break;
                case "goReports:Rental Agreements":          showReport("Rental Agreements"); break;
                case "goReports:Rental Agreement Templates": showReport("Rental Agreement Templates"); break;
                case "goReports:Rentable Types":             showReport("Rentable Types"); break;
                case "goReports:RentRolls":                  showReport("RentRolls"); break;
                case "goReports:Statements":                 showReport("Statements"); break;
                case "goReports:String Lists":               showReport("String Lists"); break;
                case "goReports:Trial Balance":              showReport("Trial Balance"); break;           }
            if (found) {
                x.toggle(s,true);
            }
        },
    },
    sidebarL1: {
        name: 'sidebarL1',
        flatButton: true,
        nodes: [
            { id: 'main', text: 'Main', img: 'icon-folder', expanded: true, group: true,
              nodes: [ { id: 'rentables', text: 'Rentables', icon: 'fa fa-cube' },
                       { id: 'transactants', text: 'Transactants', icon: 'fa fa-users' },
                       { id: 'goRentalAgreements',  text: 'Rental Agreements',  icon: 'fa fa-certificate', hint: 'Rental Agreements' },
                       { id: 'goAssessments',  text: 'Assessments',  icon: 'fa fa-star-o', hint: 'Assessments' },
                       { id: 'goReceipts',  text: 'Receipts',  icon: 'fa fa-star', hint: 'Receipts' },
                       { id: 'goRatePlan',  text: 'Rate Plan',  icon: 'fa fa-money', hint: 'RatePlan' },
                       { id: 'goServiceMenu',  text: 'Service',  icon: 'fa fa-user', hint: 'Service' },
                     ]
            },
            { id: 'reports', text: 'Reports', img: 'icon-folder', expanded: false, group: true,
              nodes: [ 
                       { id: 'assessments', text: 'Assessments', icon: 'fa fa-file-text-o' },
                       { id: 'businessUnits', text: 'Business Units', icon: 'fa fa-file-text-o' },
                       { id: 'chartOfAccounts', text: 'Chart Of Accounts', icon: 'fa fa-file-text-o' },
                       { id: 'depositMethods', text: 'Deposit Methods', icon: 'fa fa-file-text-o' },
                       { id: 'depositories', text: 'Depositories', icon: 'fa fa-file-text-o' },
                       { id: 'delinquency', text: 'Delinquency', icon: 'fa fa-file-text-o' },
                       { id: 'gsr', text: 'GSR', icon: 'fa fa-file-text-o' },
                       { id: 'journal', text: 'Journal', icon: 'fa fa-file-text-o' },
                       { id: 'ledger', text: 'Ledger', icon: 'fa fa-file-text-o' },
                       { id: 'ledgerActivity', text: 'Ledger Activity', icon: 'fa fa-file-text-o' },
                       { id: 'people', text: 'People', icon: 'fa fa-file-text-o' },
                       { id: 'paymentTypes', text: 'Payment Types', icon: 'fa fa-file-text-o' },
                       { id: 'receipts', text: 'Receipts', icon: 'fa fa-file-text-o' },
                       { id: 'countByRentable Type', text: 'Count By Rentable Type', icon: 'fa fa-file-text-o' },
                       { id: 'rentables', text: 'Rentables', icon: 'fa fa-file-text-o' },
                       { id: 'rentalAgreements', text: 'Rental Agreements', icon: 'fa fa-file-text-o' },
                       { id: 'rentalAgreementTemplates', text: 'Rental Agreement Templates', icon: 'fa fa-file-text-o' },
                       { id: 'rentableTypes', text: 'Rentable Types', icon: 'fa fa-file-text-o' },
                       { id: 'rentrolls', text: 'RentRolls', icon: 'fa fa-file-text-o' },
                       { id: 'statements', text: 'Statements', icon: 'fa fa-file-text-o' },
                       { id: 'string Lists', text: 'String Lists', icon: 'fa fa-file-text-o' },
                       { id: 'trial Balance', text: 'Trial Balance', icon: 'fa fa-file-text-o' },
                     ]
            },
            { id: 'admin', text: 'Admin', img: 'icon-folder', expanded: false, group: true,
              nodes: [ { id: 'coa', text: 'Chart Of Accounts', icon: 'fa fa-folder-o' },
                       { id: 'transactants', text: 'Transactants', icon: 'fa fa-star-o' },
                     ]
            },
        ],
        // onFlat: function (event) {
        //     w2ui['toplayout'].size = event.goFlat ? '35px' : '200px';
        // }
        onClick: function (event) {
            console.log('Target: '+ event.target, event);
            switch (event.target) {
                case 'transactants':
                    w2ui['toplayout'].content('main', w2ui['transactantGrid']);
                    w2ui['toplayout'].hide('right',true);
                    break;
                case 'rentables':
                    w2ui['toplayout'].content('main', w2ui['rentablesGrid']);
                    w2ui['toplayout'].hide('right',true);
                    break;
                case 'coa':
                    w2ui['toplayout'].content('main', w2ui['accountsGrid']);
                    w2ui['toplayout'].hide('right',true);
                    break;
            }
        }
    },
    reportstoolbar: {
        name: 'reportstoolbar',
        items: [
            { type: 'button',  id: 'monthback', icon: 'fa fa-angle-double-left' },
            { type: 'button',  id: 'dayback', icon: 'fa fa-angle-left' },
            { type: 'html',    id: 'reportsD1', html: function (item) {
                    var html =
                      '<div style="padding: 3px 10px;">'+
                      ' Start: <input type="date" name="dateD1" value="2016-08-01">'+
                      '</div>';
                    return html;
                }
            },
            { type: 'html',    id: 'reportsD2', html: function (item) {
                    var html =
                      '<div style="padding: 3px 10px;">'+
                      ' Stop: <input type="date" name="dateD2" value="2016-09-01">'+
                      '</div>';
                    return html;
                }
            },
            { type: 'button',  id: 'monthfwd', icon: 'fa fa-angle-right' },
            { type: 'button',  id: 'dayfwd', icon: 'fa fa-angle-double-right' },
        ]
    }
 
}

function showReport(rptname) {
    w2ui['toplayout'].content('main', w2ui['reportslayout']);
    w2ui['toplayout'].hide('right');
    w2ui['reportslayout'].load('main', '/wsvc/' + rptname);
}

var accountsGrid = {
    name: 'accountsGrid',
    url: '/gsvc/GLAccounts',
    show: {
        header: false,
        toolbar: true,
        footer: true,
        searches: true,
        lineNumbers: false,
        selectColumn: false,
        expandColumn: false
    },        
    columns: [
        {field: 'recid',    caption: 'recid', size: '40px', sortable: true},
        {field: 'LID',      caption: 'LID', size: '50px', sortable: true},
        {field: 'PLID',     caption: 'PLID', size: '50px', sortable: true},
        {field: 'BID',      caption: 'BID', size: '40px', sortable: true},
        {field: 'GLNumber', caption: 'GL Number', size: '85px', sortable: true},
        {field: 'Name',     caption: 'Name', size: '10%', sortable: true},
        {field: 'Status',   caption: 'Status', size: '50px', sortable: true},
        {field: 'AcctType', caption: 'AcctType', size: '140px', sortable: true},
    ],
    onSelect:  function(event) {
        console.log(event);
        console.log('**** SELECT EVENT CAUGHT *****')
    },
    onClick: function(event) {
        event.onComplete = function () {
            // Object.getOwnPropertyNames(this).forEach(function(val, idx, array) {
            //   console.log(val + ' -> ' + this[val]);
            // });   
            var sel = this.getSelection(true);
            console.log('Current selection is ' + sel );
        }
    }
}

var transactantGrid = { 
    name: 'transactantGrid', 
    url: '/gsvc/transactants',
    show: {
        header: false,
        toolbar: true,
        footer: true,
        lineNumbers: false,
        selectColumn: false,
        expandColumn: false
    },        
    columns: [
        {field: 'FirstName',    caption: "First Name",    size: '10%', sortable: true, hidden: false},
        {field: 'MiddleName',   caption: "Middle Name",   size: '10%', sortable: true, hidden: false},
        {field: 'LastName',     caption: "Last Name",     size: '10%', sortable: true, hidden: false},
        {field: 'PrimaryEmail', caption: "Primary Email", size: '10%', sortable: true, hidden: false},
        {field: 'WorkPhone',    caption: "Work Phone",    size: '10%', sortable: true, hidden: false},
        {field: 'CellPhone',    caption: "Cell Phone",    size: '10%', sortable: true, hidden: false},
    ],
    onClick: function(event) {
        console.log('**** CAUGHT EVENT: ' + event)
        console.log('     event.type = ' + event.type)
            var sel = this.getSelection(true);
            console.log('Current selection is ' + sel );
        event.onComplete = function () {
            var x = this.get
            Object.getOwnPropertyNames(x).forEach(function(val, idx, array) {
              console.log(val + ' -> ' + x[val]);
            });   
            console.log('*** onComplete handler ***')
            var sel = this.getSelection(true);
            console.log('Current selection is ' + sel );
            var index, j;
            var l = sel.length;
            if (l > 0) {
                for (index = 0; index < sel.length; ++index) {
                    j = sel[index];
                    console.log('sel[index] is ' + sel[index] + ' j = ' + j)
                    var f = w2ui['transactantForm'];
                    w2ui['toplayout'].show('right',true);
                    w2ui['toplayout'].content('right', f);
                    w2ui['toplayout'].sizeTo('right', 400);
                    ob = this.get(j)
                    // f.record['recid'] = ob.TCID;
                    console.log('ob.TCID = ' + ob.TCID)
                    console.log('f.record[recid] = ' + f.record['recid'])
                    f.url = '/gsvc/xperson/' + ob.BID + '/' + ob.TCID
                    console.log('f.url = ' + f.url)
                    f.request();
                    }
            } else {
                console.log('*** NO SELECTION FOUND ***   So, select index 0')
                this.select(1)
            }
        }
    }
}

var transactantForm = {
    name: 'transactantForm',
    style: 'border: 0px; background-color: transparent;',
    header: 'Transactant Detail',
    url: '/gsvc/xperson',
    formURL: '/html/formtc.html',
    fields: [
        { field: 'recid', type: 'int', required: false, html: { caption: 'recid', page: 0, column: 0 } },
        { field: 'FirstName', type: 'text', required: true, html: { caption: 'First Name', page: 0, column: 0 } },
        { field: 'LastName', type: 'text', required: true, html: { caption: 'Last Name', page: 0, column: 0 } },
        { field: 'MiddleName', type: 'text', required: false, html: { caption: 'Middle Name', page: 0, column: 0 } },
        { field: 'PreferredName', type: 'text', required: false, html: { caption: 'Preferred Name', page: 0, column: 0 } },
        { field: 'PrimaryEmail', type: 'email', required: false, html: { caption: 'Primary Email', page: 0, column: 0 } },
        { field: 'TCID', type: 'int', required: false, html: { caption: 'TCID', page: 0, column: 0 } },
        { field: 'BID', type: 'int', required: false, html: { caption: 'BID', page: 0, column: 0 } },
        { field: 'NLID', type: 'int', required: false, html: { caption: 'NLID', page: 0, column: 0 } },
        { field: 'CompanyName', type: 'text', required: false, html: { caption: 'Company Name', page: 0, column: 0 } },
        { field: 'IsCompany', type: 'text', required: false, html: { caption: 'Is Company', page: 0, column: 0 } },
        { field: 'SecondaryEmail', type: 'email', required: false, html: { caption: 'Secondary Email', page: 0, column: 0 } },
        { field: 'WorkPhone', type: 'phone', required: false, html: { caption: 'Work Phone', page: 0, column: 0 } },
        { field: 'CellPhone', type: 'phone', required: false, html: { caption: 'Cell Phone', page: 0, column: 0 } },
        { field: 'Address', type: 'text', required: false, html: { caption: 'Address', page: 0, column: 0 } },
        { field: 'Address2', type: 'text', required: false, html: { caption: 'Address 2', page: 0, column: 0 } },
        { field: 'City', type: 'text', required: false, html: { caption: 'City', page: 0, column: 0 } },
        { field: 'State', type: 'text', required: false, html: { caption: 'State', page: 0, column: 0 } },
        { field: 'PostalCode', type: 'text', required: false, html: { caption: 'Postal Code', page: 0, column: 0 } },
        { field: 'Country', type: 'text', required: false, html: { caption: 'Country', page: 0, column: 0 } },
        { field: 'Website', type: 'text', required: false, html: { caption: 'Website', page: 0, column: 0 } },
        { field: 'LastModTime', type: 'text', required: false, html: { caption: 'LastModTime', page: 0, column: 0 } },
        { field: 'LastModBy', type: 'text', required: false, html: { caption: 'LastModBy', page: 0, column: 0 } },
        { field: 'Points', type: 'text', required: false, html: { caption: 'Points', page: 1, column: 0 } },
        { field: 'DateofBirth', type: 'text', required: false, html: { caption: 'Date of Birth', page: 1, column: 0 } },
        { field: 'EmergencyContactName', type: 'text', required: false, html: { caption: 'Emergency Contact Name', page: 1, column: 0 } },
        { field: 'EmergencyContactAddress', type: 'text', required: false, html: { caption: 'Emergency Contact Address', page: 1, column: 0 } },
        { field: 'EmergencyContactTelephone', type: 'text', required: false, html: { caption: 'Emergency Contact Telephone', page: 1, column: 0 } },
        { field: 'EmergencyEmail', type: 'text', required: false, html: { caption: 'Emergency Email', page: 1, column: 0 } },
        { field: 'AlternateAddress', type: 'text', required: false, html: { caption: 'Alternate Address', page: 1, column: 0 } },
        { field: 'EligibleFutureUser', type: 'text', required: false, html: { caption: 'Eligible Future User', page: 1, column: 0 } },
        { field: 'Industry', type: 'text', required: false, html: { caption: 'Industry', page: 1, column: 0 } },
        { field: 'SourceSLSID', type: 'text', required: false, html: { caption: 'Source SLSID', page: 1, column: 0 } },
    ],
    tabs: [
        { id: 'tab1', caption: 'Transactant' },
        { id: 'tab2', caption: 'User'},
        { id: 'tab3', caption: 'Payor' },
        { id: 'tab4', caption: 'Prospect' },
    ],
    actions: {
        reset: function () {
            this.clear();
        },
        save: function () {
            var obj = this;
            this.save({}, function (data) { 
                if (data.status == 'error') {
                    console.log('ERROR: '+ data.message);
                    return;
                }
                obj.clear();
            });
        }
    }
}

var rentablesGrid = {
    name: 'rentablesGrid',
    url: '/gsvc/rentables',
    show: {
        header: false,
        toolbar: true,
        searches: true,
        footer: false,
        lineNumbers: false,
        selectColumn: false,
        expandColumn: false
    },        
    columns: [
        {field: 'recid', caption: 'recid', size: '50px', sortable: true},
        {field: 'RID', caption: 'RID', size: '50px', sortable: true},
        {field: 'Name', caption: 'Name', size: '15%', sortable: true},
        {field: 'AssignmentTime', caption: 'Assignment Time', size: '15%', sortable: true},
    ],
    onClick: function(event) {
        event.onComplete = function () {
            var sel = this.getSelection(true);
            console.log('Current selection is ' + sel );
        }
    }
}


$(function () {
    $('#layout').w2layout(config.mainlayout);
    w2ui.mainlayout.content('main', $().w2layout(config.toplayout));
    w2ui.mainlayout.content('top', $().w2toolbar(config.toptoolbar));
    $().w2layout(config.reportslayout);
    w2ui.reportslayout.content('top', $().w2toolbar(config.reportstoolbar));
    $().w2grid(accountsGrid);
    $().w2grid(transactantGrid);
    $().w2grid(rentablesGrid);
    $().w2form(transactantForm);
    w2ui['toplayout'].content('left',$().w2sidebar(config.sidebarL1));

});
</script>

<div id="layout"style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px;"></div>

</body>
</html>
