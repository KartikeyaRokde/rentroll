<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/js/w2ui-1.5.rc1.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="/js/w2ui-1.5.rc1.js"></script>
    <script src="https://use.fontawesome.com/6e18d0f7c3.js"></script>
</head>
<body>

<!--  color Icon images:  icon-page, w2ui-icon-check, ... see below in toptoolbar -->

<script>
var pstyle = 'border: 1px solid #dfdfdf; padding: 0px;';
var pstyle2 = 'border: 1px solid #cfcfcf; padding: 0px;';
var prefmt = 'font-family: "Monaco", "Menlo", "Source Code Pro", monospace; white-space: pre; font-size: 8pt; background-color: white;';
var stdfmt = 'font-family: "Open Sans","Roboto",sans-serif; font-size: 9pt; border-spacing:5px; padding: 5px; color: #777777'
var config = {
    mainlayout: {
        name: 'mainlayout',
        padding: 0,
        panels: [
            { type: 'top', size: 55, style: pstyle, content: 'top' },
            { type: 'left', size: 200, hidden: true, style: pstyle, content: 'left' },
            { type: 'main', style: pstyle, content: 'main' },
			{ type: 'preview', size: '50%', resizable: true, hidden: true, style: pstyle, content: 'preview' },
			{ type: 'right', size: 200, resizable: true, style: pstyle, hidden: true, content: 'Details' },
            { type: 'bottom', size: 23, resizable: true, style: stdfmt, content: '&copy; 2015-2016 Accord Interests' }
        ]
    },
    toplayout: {
        name: 'toplayout',
        padding: 1,
        panels: [
            { type: 'top', hidden: true, size: 60, resizable: true, style: pstyle2, content: '<p align="center">**** Accord NEWS FLASH ****</p>'},
            { type: 'left', size: 200, style: pstyle2, content: 'sidebar' },
            { type: 'main',  size: 100, style: pstyle2, content: 'toplayout - main' },
            { type: 'preview', size: '50%', resizable: true, hidden: true, style: pstyle2, content: 'preview' },
            { type: 'right', size: 200, resizable: true, style: pstyle2, content: 'detail' },
            { type: 'bottom', size: 20, resizable: true, style: pstyle2, hidden: true, content: 'toplayout - bottom' }
        ]
    },
    reportslayout: {
        name: 'reportslayout',
        padding: 1,
        panels: [
            { type: 'top',size: 40, style: pstyle2, content: 'reports toolbar'},
            { type: 'left', size: 200, hidden: true, content: 'sidebar' },
            { type: 'main',  size: 100, style: prefmt, content: 'reports main window' },
            { type: 'preview', size: '50%', resizable: true, hidden: true, content: 'reports preview' },
            { type: 'right', size: 200, resizable: true, hidden: true, content: 'reports - detail' },
            { type: 'bottom', size: 20, resizable: true, hidden: true, content: 'reports - bottom' }
        ]
    },
    toptoolbar: {
        name: 'toptoolbar',
        items: [
             { type: 'html',  id: 'logo',
                html: '<div style="padding: 4px 0px;">'+
                      '<img src="/html/images/logo.png">'+
                      '</div>' 
            },
            { type: 'break', id: 'break1' },
            { type: 'menu',    id: 'moduleMenu', caption: 'Select Module',    icon: 'fa fa-sitemap', items: [
                { text: 'Directory',          icon: 'fa fa-user' }, 
                { text: 'RentRoll',           icon: 'fa fa-building-o' }, 
                { text: 'Forms & Procedures', icon: 'fa fa-book' }, 
            ]},
            // { type: 'html', id: 'BUD',
            //     html: '<select class="HR" name="CoCode">'+
            //         '<option value="1" >REX</option>'+
            //         '<option value="2" >401</option>'+
            //         '<option value="3" >CCC</option></select>'
            // },
            { type: 'menu',    id: 'budMenu', caption: 'Select Business Unit',    icon: 'fa fa-building', items: [
                { text: 'REX', icon: 'fa fa-building-o' }, 
                { text: 'CCC', icon: 'fa fa-building-o' }, 
                { text: '401', icon: 'fa fa-building-o' }, 
            ]},
            { type: 'break', id: 'break2' },
            { type: 'button',  id: 'goRentantables',  caption: 'Rentables',  icon: 'fa fa-cube', hint: 'Rentables' },
            { type: 'button',  id: 'goTransactants',  caption: 'Transactants',  icon: 'fa fa-users', hint: 'Transactants' },
            { type: 'button',  id: 'goRentalAgreements',  caption: 'Rental<br>Agreements',  icon: 'fa fa-certificate', hint: 'Rental Agreements' },
            { type: 'button',  id: 'goAssessments',  caption: 'Assessments',  icon: 'fa fa-star-o', hint: 'Assessments' },
            { type: 'button',  id: 'goReceipts',  caption: 'Receipts',  icon: 'fa fa-star', hint: 'Receipts' },
            { type: 'button',  id: 'goRatePlan',  caption: 'Rate Plan',  icon: 'fa fa-money', hint: 'RatePlan' },
            { type: 'menu',    id: 'goServiceMenu',  caption: 'Service',  icon: 'fa fa-user', hint: 'GLAccounts, Transactants', items: [
                { text: 'GLAccounts', icon: 'fa fa-folder-o' }, 
                { text: 'Transactants', icon: 'fa fa-folder-o' }, 
            ]},
            { type: 'menu',  id: 'goReports',  caption: 'Reports',  icon: 'fa fa-file-text-o', hint: 'Reports', items: [
                { text: 'Assessments', icon: 'fa fa-file-text-o' },
                { text: 'Business Units', icon: 'fa fa-file-text-o' },
                { text: 'Chart Of Accounts', icon: 'fa fa-file-text-o' },
                { text: 'Deposit Methods', icon: 'fa fa-file-text-o' },
                { text: 'Depositories', icon: 'fa fa-file-text-o' },
                { text: 'Delinquency', icon: 'fa fa-file-text-o' },
                { text: 'GSR', icon: 'fa fa-file-text-o' },
                { text: 'Journal', icon: 'fa fa-file-text-o' },
                { text: 'Ledger', icon: 'fa fa-file-text-o' },
                { text: 'Ledger Activity', icon: 'fa fa-file-text-o' },
                { text: 'People', icon: 'fa fa-file-text-o' },
                { text: 'Payment Types', icon: 'fa fa-file-text-o' },
                { text: 'Receipts', icon: 'fa fa-file-text-o' },
                { text: 'Count By Rentable Type', icon: 'fa fa-file-text-o' },
                { text: 'Rentables', icon: 'fa fa-file-text-o' },
                { text: 'Rental Agreements', icon: 'fa fa-file-text-o' },
                { text: 'Rental Agreement Templates', icon: 'fa fa-file-text-o' },
                { text: 'Rentable Types', icon: 'fa fa-file-text-o' },
                { text: 'RentRolls', icon: 'fa fa-file-text-o' },
                { text: 'Statements', icon: 'fa fa-file-text-o' },
                { text: 'String Lists', icon: 'fa fa-file-text-o' },
                { text: 'Trial Balance', icon: 'fa fa-file-text-o' },            ]},
            { type: 'button',  id: 'goAdmin',  caption: 'Admin',  icon: 'fa fa-wrench', hint: 'Admin' },
            { type: 'menu',    id: 'menuButton', caption: 'Panels',    icon: 'fa fa-table', items: [
                { text: 'Messages', icon: 'fa fa-folder-o' }, 
                { text: 'Sidebar', icon: 'fa fa-folder-o' }, 
                { text: 'mainLayoutMain', icon: 'fa fa-folder-open-o' }, 
                { text: 'topLayoutmain',  icon: 'fa fa-folder-open' },
                { text: 'Preview', icon: 'fa fa-folder-open' },
                { text: 'Details', icon: 'fa fa-folder-open' },
                { text: 'Footer', icon: 'fa fa-folder-open' },
            ]},
        ],
        onClick: function (event) {
            var s;
            var found = false;
            var x;
            switch(event.target) {
                case "moduleMenu:Directory":      window.location.href = 'https://directory.airoller.com/'; break;
                case "moduleMenu:RentRoll":       window.location.href = 'https://rentroll.airoller.com/';  break;
                case "menuButton:Messages":       w2ui['toplayout'].toggle('top',true);                     break;
                case "menuButton:Sidebar":        w2ui['toplayout'].toggle('left',true);                    break;
                case "menuButton:mainLayoutMain": w2ui['mainlayout'].toggle('main',true);                   break;
                case "menuButton:Preview":        w2ui['toplayout'].toggle('preview',true);                 break;
                case "menuButton:Details":        w2ui['toplayout'].toggle('right',true);                   break;
                case "menuButton:Footer":         w2ui['mainlayout'].toggle('bottom',true);                 break;
                case "menuButton:topLayoutMain":  w2ui['toplayout'].toggle('main',true);                    break;
                case "goServiceMenu:GLAccounts":
                    w2ui['toplayout'].content('main', w2ui['accountsGrid']);
                    break;
                case "goServiceMenu:Transactants":
                    w2ui['toplayout'].content('main', w2ui['transactantGrid']);
                    break;
                case "goReports:Assessments":
                    w2ui['toplayout'].content('main', w2ui['reportslayout']);
                    w2ui['reportslayout'].load('main', '/');
                    break;
           }
            if (found) {
                x.toggle(s,true);
            }
        },
    },
    reportstoolbar: {
        name: 'reportstoolbar',
        items: [
            { type: 'button',  id: 'monthback', icon: 'fa fa-angle-double-left' },
            { type: 'button',  id: 'dayback', icon: 'fa fa-angle-left' },
            { type: 'html',    id: 'reportsD1', html: function (item) {
                    var html =
                      '<div style="padding: 3px 10px;">'+
                      ' Start: <input type="date" name="dateD1">'+
                      '</div>';
                    return html;
                }
            },
            { type: 'html',    id: 'reportsD2', html: function (item) {
                    var html =
                      '<div style="padding: 3px 10px;">'+
                      ' Stop: <input type="date" name="dateD2">'+
                      '</div>';
                    return html;
                }
            },
            { type: 'button',  id: 'monthfwd', icon: 'fa fa-angle-right' },
            { type: 'button',  id: 'dayfwd', icon: 'fa fa-angle-double-right' },
        ]
    }
 
}

var accountsGrid = {
    name: 'accountsGrid',
    url: 'https://localhost:8271/gsvc/GLAccounts',
    show: {
        header: false,
        toolbar: true,
        footer: true,
        searches: true,
        lineNumbers: false,
        selectColumn: false,
        expandColumn: false
    },        
    columns: [
        {field: 'recid',    caption: 'recid', size: '40px', sortable: true},
        {field: 'LID',      caption: 'LID', size: '50px', sortable: true},
        {field: 'PLID',     caption: 'PLID', size: '50px', sortable: true},
        {field: 'BID',      caption: 'BID', size: '40px', sortable: true},
        {field: 'GLNumber', caption: 'GL Number', size: '85px', sortable: true},
        {field: 'Name',     caption: 'Name', size: '10%', sortable: true},
        {field: 'Status',   caption: 'Status', size: '50px', sortable: true},
        {field: 'AcctType', caption: 'AcctType', size: '140px', sortable: true},
    ],
    onSelect:  function(event) {
        console.log(event);
        console.log('**** SELECT EVENT CAUGHT *****')
    },
    onClick: function(event) {
        event.onComplete = function () {
            // Object.getOwnPropertyNames(this).forEach(function(val, idx, array) {
            //   console.log(val + ' -> ' + this[val]);
            // });   
            var sel = this.getSelection(true);
            console.log('Current selection is ' + sel );
        }
    }
}

var transactantGrid = { 
    name: 'transactantGrid', 
    url: 'https://localhost:8271/gsvc/transactants',
    show: {
        header: false,
        toolbar: true,
        footer: true,
        lineNumbers: false,
        selectColumn: false,
        expandColumn: false
    },        
    columns: [
        {field: 'FirstName',    caption: "First Name",    size: '10%', sortable: true, hidden: false},
        {field: 'MiddleName',   caption: "Middle Name",   size: '10%', sortable: true, hidden: false},
        {field: 'LastName',     caption: "Last Name",     size: '10%', sortable: true, hidden: false},
        {field: 'PrimaryEmail', caption: "Primary Email", size: '10%', sortable: true, hidden: false},
        {field: 'WorkPhone',    caption: "Work Phone",    size: '10%', sortable: true, hidden: false},
        {field: 'CellPhone',    caption: "Cell Phone",    size: '10%', sortable: true, hidden: false},
        {field: 'Address',      caption: "Address",       size: '10%', sortable: true, hidden: false},
        {field: 'Address2',     caption: "Address2",      size: '10%', sortable: true, hidden: false},
        {field: 'City',         caption: "City",          size: '10%', sortable: true, hidden: false},
        {field: 'PostalCode',   caption: "PostalCode",    size: '10%', sortable: true, hidden: false},
        {field: 'State',        caption: "State",         size: '10%', sortable: true, hidden: false},
    ],
    onClick: function(event) {
        console.log('**** CAUGHT EVENT: ' + event)
        console.log('     event.type = ' + event.type)
            var sel = this.getSelection(true);
            console.log('Current selection is ' + sel );
        // event.onComplete = function () {
        //     // Object.getOwnPropertyNames(this).forEach(function(val, idx, array) {
        //     //   console.log(val + ' -> ' + this[val]);
        //     // });   
        //     console.log('*** onComplete handler ***')
        //     var sel = this.getSelection(true);
        //     console.log('Current selection is ' + sel );
        //     var index, j;
        //     var l = sel.length;
        //     if (l > 0) {
        //         for (index = 0; index < sel.length; ++index) {
        //             j = sel[index];
        //             console.log('sel[index] is ' + sel[index] + ' j = ' + j)
        //             var f = w2ui['transPreviewForm'];
        //             w2ui['layout'].show('preview',true);
        //             w2ui['previewLayout'].content('main', f);
        //             ob = this.get(j)
        //             f.record['FirstName'] = ob.FirstName;
        //             f.record['LastName'] = ob.LastName;
        //             f.record['PrimaryEmail'] = ob.PrimaryEmail;
        //             }
        //     } else {
        //         console.log('*** NO SELECTION FOUND ***   So, select index 0')
        //         this.select(1)
        //     }
        // }
    }
}

$(function () {
    $('#layout').w2layout(config.mainlayout);
    w2ui.mainlayout.content('main', $().w2layout(config.toplayout));
    w2ui.mainlayout.content('top', $().w2toolbar(config.toptoolbar));
    $().w2layout(config.reportslayout);
    w2ui.reportslayout.content('top', $().w2toolbar(config.reportstoolbar));
    $().w2grid(accountsGrid);
    $().w2grid(transactantGrid);

});
</script>

<div id="layout"style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px;"></div>

</body>
</html>
